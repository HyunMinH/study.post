# 책임 할당을 위한 GRASP 패턴

## General Responsibility Assignment Software Pattern

- 객체에게 책임을 할당할 때 지침으로 삼을 수 있는 원칙들의 집합을 패턴 형식으로 정리한 것

## 도메인 개념에서 출발하기

- 설계를 시작하기 전에 도메인에 대한 개략적인 모습을 그려보는 것이 유용하다.

- 올바른 도메인 모델은 존재하지 않는다

    - 도메인 개념 정리에 너무 시간을 들이지 말고 빠르게 설계와 구현을 진행하자

## 정보 전문가에게 책임을 할당하라

### Information Expert Pattern

- 메시지를 수신할 적합한 객체는 누구인가?

- 위 질문에 책임을 수행할 정보를 알고 있는 객체에게 할당하자

    - 정보와 행동을 최대한 가까운 곳에 위치시킴

    - 캡슐화 유지 가능

    - 결과적으로 높은 응집도와 결합도가 낮아짐

    - 간결하고 유지보수하기 쉬워짐

- 정보를 알고 있다고 해서 저장하고 있을 필요는 없음.

## 높은 응집도와 낮은 결합도

- 여러 개의 협력 패턴 중에서 높은 응집도와 낮은 결합도를 얻을 수 있는 설계가 있다면 그 설계를 선택해야 한다.

### Low Coupling Pattern

- 여러 설계 대안들이 있을 때 낮은 결합도를 유지할 수 있는 설계를 선택하라

    - 할인 여부 판단할 때 DiscountCondition이 Screening 보다는 Movie와 협력하는게 좋다.

    - 이미 Movie와 DiscountCondition이 결합하고 있기 때문에 할인 여부를 판단할 때 Movie DiscountCondition이 협력하면 설계 전체적으로 결합도를 추가하지 않고 협력을 완성할 수 있다.

### High Cohesion Pattern

- 높은 응집도를 유지할 수 있게 책임을 할당하라

    - Screening의 가장 중요한 책임은 예매를 생성하는 것이다.

    - 만약 Screening이 DiscountCondition과 협력해야 한다면

    - Screening이 영화 요금 계산과 관련된 책임 일부를 떠안아야 한다.


### 책임을 할당하고 코드를 작성하는 매순간마다 Low Coupling과 High Cohesion의 관점에서 검토하라

## 창조자에게 객체 생성 책임을 할당하라

### Creator Pattern

- 객체 A를 생성해야 할 때, 아래 조건을 최대한 많이 만족하는 B에게 객체 생성 책임을 할당하라

    - B가 A 객체를 포함하거나 참조한다.

    - B가 A 객체를 기록한다.

    - B가 A 객체를 긴밀하게 사용한다.

    - B가 A 객체를 초기화하는 데 필요한 데이터를 가지고 있다 (이 경우 B는 A에 대한 정보 전문가이다.)

- 이 패턴은 이미 존재하는 객체 사이의 관계를 이용 -> 설계가 낮은 결합도를 유지할 수 있다.

    - Reservation을 생성할 때 Screening이 적합

        - 예매 정보를 생성하는데 필요한 영화, 상영시간, 상영 순번 등의 정보에 대한 전문가

        - 예매 요금을 계산하는 데 필수적인 Movie도 알고 있음
